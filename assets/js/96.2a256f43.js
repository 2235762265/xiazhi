(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{522:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ajax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ajax"}},[t._v("#")]),t._v(" AJAX")]),t._v(" "),s("h2",{attrs:{id:"一、概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、概念"}},[t._v("#")]),t._v(" 一、概念")]),t._v(" "),s("h3",{attrs:{id:"_1-1-什么是ajax"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是ajax"}},[t._v("#")]),t._v(" 1.1 什么是AJAX")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ajax 即 Asynchronous Javascript And XML（异步JavaScript和XML）。")])]),t._v(" "),s("li",[s("p",[t._v("是 前后端数据交互的一种技术，用于快速创建动态网页的技术。")])]),t._v(" "),s("li",[s("p",[t._v("它是异步的AJAX 通过在后台与服务器进行少量数据交换，使网页实现异步更新。这意味着可以在不重载整个页面的情况下，对网页的某些部分（局部）进行更新。")])]),t._v(" "),s("li",[s("p",[t._v("传统的网页（不使用 AJAX）如果需要更新内容，必须重载整个页面。")])])]),t._v(" "),s("h3",{attrs:{id:"_1-2-说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-说明"}},[t._v("#")]),t._v(" 1.2 说明")]),t._v(" "),s("p",[t._v("Ajax 并不是一个新技术，而是多个技术的整合：")]),t._v(" "),s("p",[t._v("HTML，CSS，JavaScript，DOM，XML，XML，HttpRequest 对象")]),t._v(" "),s("h3",{attrs:{id:"_1-3-传统ajax的优劣"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-传统ajax的优劣"}},[t._v("#")]),t._v(" 1.3 传统ajax的优劣")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("不需要插件的支持，原生 js 就可以使用")])]),t._v(" "),s("li",[s("p",[t._v("只更新局部，而不用刷新整个页面")])]),t._v(" "),s("li",[s("p",[t._v("它是异步的，无阻塞的")])]),t._v(" "),s("li",[s("p",[t._v("流程比较多，编写比较麻烦")])])]),t._v(" "),s("h3",{attrs:{id:"_1-4-什么是异步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-什么是异步"}},[t._v("#")]),t._v(" 1.4 什么是异步")]),t._v(" "),s("p",[t._v("javascript是单线程")]),t._v(" "),s("p",[t._v("javascript的执行顺序是从上到下的，异步阻塞的意思是，执行到异步逻辑的时候，会将异步逻辑添加到js的任务队列，继续执行javascript主线程的逻辑，等到任务队列中返回结果,才进行回调")]),t._v(" "),s("blockquote",[s("p",[t._v("比如:中午去买饭,要排队,一个人买完之后才到下一个人,但是前面那个人付钱的时候,手机死机卡住了")])]),t._v(" "),s("blockquote",[s("p",[t._v("=>同步: 后面的人一直等,等到他手机开机,并且付完钱,才到下一个人​")])]),t._v(" "),s("blockquote",[s("p",[t._v("=>异步: 手机死机了,到旁边去,让下一个人继续买房,一直到手机恢复了,再付钱")])]),t._v(" "),s("p",[t._v("同步是阻塞的")]),t._v(" "),s("p",[t._v("异步是无阻塞的")]),t._v(" "),s("p",[t._v("setTimeout 和 setInterval都是异步的")]),t._v(" "),s("h3",{attrs:{id:"_1-5-了解xml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-了解xml"}},[t._v("#")]),t._v(" 1.5 了解XML")]),t._v(" "),s("p",[t._v("ajax基于XMLHttpRequest是一种扩展的标记语言，和HTML是不一样的，HTML是用来展示视图用，XML是用来前后端数据传输的一种标记语言")]),t._v(" "),s("p",[t._v("比如 XML的语法:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("小明"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("age")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("29"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("age")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("sex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("男"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("sex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v('以上的代码中,标签的名字会作为数据的"key"标签中间的内容会作为value传输给后端')]),t._v(" "),s("ul",[s("li",[s("p",[t._v("和HTML的区别:")])]),t._v(" "),s("li",[s("p",[t._v("HTML用于在浏览器中渲染内容,进行内容的呈现")])]),t._v(" "),s("li",[s("p",[t._v("HTML的标签名字自己定义没有效果")])])]),t._v(" "),s("h2",{attrs:{id:"二、ajax-的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、ajax-的使用"}},[t._v("#")]),t._v(" 二、AJAX 的使用")]),t._v(" "),s("h3",{attrs:{id:"_2-1-核心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-核心"}},[t._v("#")]),t._v(" 2.1 核心")]),t._v(" "),s("p",[t._v("Ajax 的核心是XMLHttpRequest 对象。XMLHttpRequest对象提供了在客户端和服务端传输数据的功能，XMLHttpRequest 对象提供了通过 URL 方式来获取数据，只更新网页的一部分数据。")]),t._v(" "),s("h3",{attrs:{id:"_2-2-实现-ajax-的步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-实现-ajax-的步骤"}},[t._v("#")]),t._v(" 2.2 实现 ajax 的步骤")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("创建 Ajax 核心对象（XMLHttpRequest）")])]),t._v(" "),s("li",[s("p",[t._v("const xhr = new XMLHttpRequest();")])]),t._v(" "),s("li",[s("p",[t._v("通过 Ajax 核心对象的 open() 方法建立与服务端的链接")])]),t._v(" "),s("li",[s("p",[t._v('xhr.open("get","url",true);')])]),t._v(" "),s("li",[s("p",[t._v("构建请求的数据内容，通过 Ajax 核心对象的 send() 方法发送给服务端")])]),t._v(" "),s("li",[s("p",[t._v("xhr.send();")])]),t._v(" "),s("li",[s("p",[t._v("通过 Ajax 核心对象提供的 onreadystatechange 事件，监听服务端的通信状态")])]),t._v(" "),s("li",[s("p",[t._v("接受处理服务端响应的结果")])]),t._v(" "),s("li",[s("p",[t._v("将结果更新到页")])])]),t._v(" "),s("h4",{attrs:{id:"_1-创建-xmlhttprequest-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建-xmlhttprequest-对象"}},[t._v("#")]),t._v(" （1）创建 XMLHttpRequest 对象")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在 IE 中又分为两种情况：可以不考虑")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// IE7 版本：new ActiveXObject("Msxml2.XMLHTTP")')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// IE6 及以下版本：new ActiveXObject("Microsoft.XMLHTTP")')]),t._v("\n")])])]),s("h4",{attrs:{id:"_2-向服务器发送请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-向服务器发送请求"}},[t._v("#")]),t._v(" （2）向服务器发送请求")]),t._v(" "),s("p",[t._v("如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的 open() 和 send() 方法")]),t._v(" "),s("p",[t._v("open(method,url,async)规定请求的类型、URL 以及是否异步处理请求--打开与服务器的连接")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("method：请求的类型；GET 或 POST")])]),t._v(" "),s("li",[s("p",[t._v("url：请求数据的url地址--接口")])]),t._v(" "),s("li",[s("p",[t._v("async：true（异步）或 false（同步）----默认是true")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"get"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./data.php"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("send()方法将请求发送到服务器")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在 Ajax 提交方式中如果使用 get 方式提交数据时，send 方法中 不传参数 或 写入null。")])]),t._v(" "),s("li",[s("p",[t._v("在 Ajax 提交方式中如果使用 post 方式提交数据时，send 方法中 传入参数。")])])]),t._v(" "),s("p",[t._v("xhr.send();")]),t._v(" "),s("h4",{attrs:{id:"_3-ajax-的状态信息-readystate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-ajax-的状态信息-readystate"}},[t._v("#")]),t._v(" （3）ajax 的状态信息 - readyState")]),t._v(" "),s("p",[t._v("Ajax 核心对象的 readyState属性 存有 XMLHttpRequest 的状态信息。从 0 到 4 发生变化。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("0    请求未初始化，也就是 open 方法还没有执行")])]),t._v(" "),s("li",[s("p",[t._v("1    服务器连接已建立，表示配置信息已经完成，服务器连接已经建立,也就是执行完 open 之后")])]),t._v(" "),s("li",[s("p",[t._v("2    请求已接收，表示 send 方法已经执行完成")])]),t._v(" "),s("li",[s("p",[t._v("3    请求处理中，表示正在解析响应内容")])]),t._v(" "),s("li",[s("p",[t._v("4    请求已完成，且响应已就绪，表示响应内容已经解析完毕，可以在客户端使用了")])])]),t._v(" "),s("p",[t._v("注意：所以只有当 readyState === 4 的时候，我们才可以正常使用服务端给我们的数据")]),t._v(" "),s("h4",{attrs:{id:"_4-ajax-的-http状态码-status"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ajax-的-http状态码-status"}},[t._v("#")]),t._v(" （4）ajax 的 http状态码 - status")]),t._v(" "),s("p",[t._v("Ajax 核心对象的 status属性 会记录 请求的状态码")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("200    请求成功")])]),t._v(" "),s("li",[s("p",[t._v("304    请求的资源未变化（没有改动）")])]),t._v(" "),s("li",[s("p",[t._v("404    服务器端地址未找到")])]),t._v(" "),s("li",[s("p",[t._v("注意：当 readyState 等于 4 且状态为 200 时，表示响应已完全就绪：")])])]),t._v(" "),s("h4",{attrs:{id:"_5-响应结果-responsetext"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-响应结果-responsetext"}},[t._v("#")]),t._v(" （5）响应结果 - responseText")]),t._v(" "),s("p",[t._v("Ajax 核心对象的 responseText 属性 会接收服务端对该请求的响应结果（纯文本内容）")]),t._v(" "),s("h4",{attrs:{id:"_6-onreadystatechange事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-onreadystatechange事件"}},[t._v("#")]),t._v(" （6）onreadystatechange事件")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("当请求被发送到服务器时，我们需要执行一些基于响应的任务。")])]),t._v(" "),s("li",[s("p",[t._v("在 Ajax 核心对象中有一个事件，叫做 onreadystatechange事件")])]),t._v(" "),s("li",[s("p",[t._v("这个事件是专门用来监听 ajax 对象的 readyState 值改变的的行为")])]),t._v(" "),s("li",[s("p",[t._v("也就是说只要 readyState 的值发生变化了，那么就会触发该事件")])]),t._v(" "),s("li",[s("p",[t._v("所以我们就在这个事件中来监听 ajax 的 readyState 是不是到 4 了")])])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每次 readyState 改变的时候都会触发该事件")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我们就在这里判断 readyState 的值是不是到 4")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 并且 http 的状态码是不是 200")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里表示验证通过")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 我们就可以获取服务端给我们响应的内容了")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"_7-ajax四步走"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-ajax四步走"}},[t._v("#")]),t._v(" （7）ajax四步走")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一步：创建ajax对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第二步：链接到服务器")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"get"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./data.php"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第三步：发送请求")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第四步：监听ajax状态")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//处理返回数据")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-3-发送请求时携带参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-发送请求时携带参数"}},[t._v("#")]),t._v(" 2.3 发送请求时携带参数")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("我们使用 ajax 发送请求也是可以携带参数的")])]),t._v(" "),s("li",[s("p",[t._v("参数就是和后台交互的时候给他的一些信息")])]),t._v(" "),s("li",[s("p",[t._v("但是携带参数 get 和 post 两个方式还是有区别的")])])]),t._v(" "),s("h4",{attrs:{id:"_1-带有参数的-get-请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-带有参数的-get-请求"}},[t._v("#")]),t._v(" （1）带有参数的 get 请求")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("get请求传递参数 是 使用 queryString 的方式")])]),t._v(" "),s("li",[s("p",[t._v("就是直接拼接在请求接口地址后面")])]),t._v(" "),s("li",[s("p",[t._v("直接在地址后面加一个 ?，然后以 key=value 的形式传递、")])]),t._v(" "),s("li",[s("p",[t._v("多个参数使用&进行连接")])]),t._v(" "),s("li",[s("p",[t._v("xxxx.com?key=value&key=value&key=value")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建ajax对象")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'get'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data.php?a=100&b=200'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 发送请求--发送数据给服务器")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get请求 send(null)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post请求才需要在这里传递参数")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听ajax状态")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//处理返回数据")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"_2-带有参数的-post-请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-带有参数的-post-请求"}},[t._v("#")]),t._v(" （2）带有参数的 post 请求")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("post请求使用send来发送数据给服务端，一定要在send方法调用之前设定请求头")])]),t._v(" "),s("li",[s("p",[t._v("通过 ajax核心对象的 xhr.setRequestHeader('key','value')方法 设定请求头")])])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("携带的参数 按照 queryString 的格式 传递，请求头这样设定")])]),t._v(" "),s("li",[s("p",[t._v("value 应当设定为 'application/x-www-form-urlencoded'")])]),t._v(" "),s("li",[s("p",[t._v("xhr.setRequestHeader('content-type','application/x-www-form-urlencoded');")])]),t._v(" "),s("li",[s("p",[t._v("发送服务器的传参格式")])]),t._v(" "),s("li",[s("p",[t._v("xhr.send('username=lbw&password=555');")])]),t._v(" "),s("li",[s("p",[t._v("携带的参数 按照 json 的格式 传递，请求头 这样设定")])]),t._v(" "),s("li",[s("p",[t._v("value 应当设定为 'application/json'")])]),t._v(" "),s("li",[s("p",[t._v("xhr.setRequestHeader('content-type','application/json');")])])]),t._v(" "),s("p",[t._v("json 的 传参格式")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// let o = {")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     username:'lbw',")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     password:555")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// xhr.send(JSON.stringify(o));")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" xhr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XMLHttpRequest")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 和服务器建立连接")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'get'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data.php'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// post请求使用send来发送数据给服务端，一定要在send方法调用之前设定请求头")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 传递的数据格式--分请求头")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过ajax对象的setRequestHeader设置请求头")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// xhr.setRequestHeader('key','value')\t")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. content-type:application/x-www-form-urlencoded;")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这个请求头是表单提交数据的格式:和queryString差不多")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'a=100&b=200'")]),t._v("\n\t\txhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/x-www-form-urlencoded'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\txhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a=100&b=200'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. content-type:application/json")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这个是传递JSON格式  ")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// \'{"a":"100","b":"200"}\'')]),t._v("\n\t\txhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRequestHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\txhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"a":"100","b":"200"}\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听ajax状态")]),t._v("\nxhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onreadystatechange")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readyState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("xhr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("responseText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//处理返回数据")]),t._v("\n   \t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"三、同源策略和跨域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、同源策略和跨域"}},[t._v("#")]),t._v(" 三、同源策略和跨域")]),t._v(" "),s("h3",{attrs:{id:"_3-1-同源策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-同源策略"}},[t._v("#")]),t._v(" 3.1 同源策略")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("同域名")])]),t._v(" "),s("li",[s("p",[t._v("同协议")])]),t._v(" "),s("li",[s("p",[t._v("同端口")])])]),t._v(" "),s("p",[t._v("这三个只要任何一个不满足,就是跨域了")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//客户端                  服务端")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("请求 "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:3000"')]),t._v(" 是否跨域"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" 跨域"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("因为端口不同\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("请求 "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://localhost"')]),t._v(" 是否跨域"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" 跨域"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("因为协议不同\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("请求 "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://chst.vip"')]),t._v(" 域名不同\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://chst.vip:80"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("请求"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http//chst.vip/abc"')]),t._v(" 不跨域\n")])])]),s("h3",{attrs:{id:"_3-2-跨域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-跨域"}},[t._v("#")]),t._v(" 3.2 跨域")]),t._v(" "),s("h4",{attrs:{id:"_1-什么是跨域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是跨域"}},[t._v("#")]),t._v(" （1）什么是跨域?")]),t._v(" "),s("p",[t._v("跨域是浏览器的安全策略,服务端根本不存在跨域一说,只有在浏览器里面才有这个限制")]),t._v(" "),s("p",[t._v("只要不同源,就会引起跨域")]),t._v(" "),s("h4",{attrs:{id:"_2-后端响应头允许跨域-熟记"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-后端响应头允许跨域-熟记"}},[t._v("#")]),t._v(" （2）后端响应头允许跨域(熟记)")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'Access-Control-Allow-Origin'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),t._v("\n")])])]),s("h4",{attrs:{id:"_3-解决跨域的方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-解决跨域的方案"}},[t._v("#")]),t._v(" （3）解决跨域的方案")]),t._v(" "),s("h5",{attrs:{id:"浏览器插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器插件"}},[t._v("#")]),t._v(" 浏览器插件")]),t._v(" "),s("h5",{attrs:{id:"_1-allow-cros插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-allow-cros插件"}},[t._v("#")]),t._v(" 1.Allow Cros插件")]),t._v(" "),s("p",[t._v("​\t一定不能使用file协议打开文件,使用"),s("strong",[t._v("open with live server")]),t._v("，保证在appache的环境下运行html")]),t._v(" "),s("h5",{attrs:{id:"_2-谷歌命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-谷歌命令"}},[t._v("#")]),t._v(" 2.谷歌命令")]),t._v(" "),s("p",[t._v("在有请求头的情况下，谷歌插件不能解决跨域问题")]),t._v(" "),s("p",[t._v("步骤")]),t._v(" "),s("ol",[s("li",[t._v("右键谷歌浏览器图标")]),t._v(" "),s("li",[t._v("点击快捷方式")]),t._v(" "),s("li",[t._v("在起始位置一栏，添加如下代码")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("C")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\\chromedata\n")])])]),s("p",[t._v("注意：--前面有一个空格")]),t._v(" "),s("h5",{attrs:{id:"_3-jsonp-需要服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-jsonp-需要服务器"}},[t._v("#")]),t._v(" 3. JSONP(需要服务器)")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("jsonp是我们实现跨域请求的手段，是把我们之前的东西组合在一起使用的技术手段而已")])]),t._v(" "),s("li",[s("p",[t._v("利用的是 script 标签来实现script 标签的本质")])]),t._v(" "),s("li",[s("p",[t._v("浏览器给我们提供了一个 script 标签")])]),t._v(" "),s("li",[s("p",[t._v("它的本质就是请求一个外部资源，是不受到同源策略的影响的")])]),t._v(" "),s("li",[s("p",[t._v("同时 script 标签的 src 属性，也是一种请求，也能被服务器接收到")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("jsonp只能发起get请求")])])]),t._v(" "),s("li",[s("p",[t._v("script标签的src属性请求回来的东西是一个字符串，浏览器会把这个字符串当作 js 代码来执行")])]),t._v(" "),s("li",[s("p",[t._v("所以我们就可以利用这个 "),s("strong",[t._v("script")]),t._v(" 标签的 "),s("strong",[t._v("src")]),t._v(" 属性来进行跨域请求了")])])]),t._v(" "),s("p",[s("strong",[t._v("操作步骤：")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("动态生成一个script标签 "),s("code",[t._v("let sc=document.createElement('script')")])])]),t._v(" "),s("li",[s("p",[t._v("给script标签的src属性添加api接口\t"),s("code",[t._v('sc.src="http://..........?key=value&key1=value1"')])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("src中api接口最后添加上")]),s("code",[t._v("&callback=cb")]),t._v("回调函数")])]),t._v(" "),s("li",[s("p",[t._v("声明回调函数"),s("code",[t._v("cb()")]),t._v("，所有请求功能都在"),s("code",[t._v("cb()")]),t._v("里完成")])]),t._v(" "),s("li",[s("p",[t._v("把script添加至body中"),s("code",[t._v("document.body.append(sc)")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" sc "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/sugrec?prod=pc&wd=手机&cb=cb'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//data即请求回来的数据")]),t._v("\n\tconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"四、接口api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、接口api"}},[t._v("#")]),t._v(" 四、接口api")]),t._v(" "),s("h3",{attrs:{id:"一"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一"}},[t._v("#")]),t._v(" 一")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("地址：http://chst.vip/data/rate.json")])]),t._v(" "),s("li",[s("p",[t._v("请求方式：GET")])])]),t._v(" "),s("h3",{attrs:{id:"二"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二"}},[t._v("#")]),t._v(" 二")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("地址：http://chst.vip/users/login")])]),t._v(" "),s("li",[s("p",[t._v("请求方式：POST")])]),t._v(" "),s("li",[s("p",[t._v("参数")])]),t._v(" "),s("li",[s("p",[t._v("username=lbw")])]),t._v(" "),s("li",[s("p",[t._v("password=555")])])]),t._v(" "),s("h3",{attrs:{id:"三"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三"}},[t._v("#")]),t._v(" 三")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("地址：https://v0.yiketianqi.com/free/day")])]),t._v(" "),s("li",[s("p",[t._v("请求方式：GET")])]),t._v(" "),s("li",[s("p",[t._v("请求参数说明：")])]),t._v(" "),s("li",[s("p",[t._v("参数名")])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("必选")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("appid")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("用户appid")]),t._v(" "),s("td",[t._v("24354383")])]),t._v(" "),s("tr",[s("td",[t._v("appsecret")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("用户appsecret")]),t._v(" "),s("td",[t._v("xwHH3cmq")])]),t._v(" "),s("tr",[s("td",[t._v("city")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("城市名称")]),t._v(" "),s("td",[t._v("不要带市和区, 支持市区县, 不支持乡镇级别; 如: 青岛、铁西")])]),t._v(" "),s("tr",[s("td",[t._v("unescape")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("Int")]),t._v(" "),s("td",[t._v("是否转义中文")]),t._v(" "),s("td",[t._v("如果您希望json不被unicode, 直接输出中文, 请传此参数: 1")])])])]),t._v(" "),s("ul",[s("li",[t._v("响应JSON")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nums"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("226")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//今日实时请求次数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cityid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"101120101"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//城市ID")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"city"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"济南"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"date"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2022-05-05"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"week"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"星期四"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"update_time"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"22:38"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//更新时间")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"wea"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"多云"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//天气情况")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"wea_img"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yun"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//天气标识")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tem"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"25"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//实况温度")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tem_day"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"30"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//白天温度(高温)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tem_night"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"23"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//夜间温度(低温)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"win"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"南风"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//风向")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"win_speed"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3级"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//风力")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"win_meter"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"19km\\/h"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//风速")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"air"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"53"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//空气质量")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pressure"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"987"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//气压")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"humidity"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"27%"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//湿度")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("百度搜索提示")]),t._v(" "),s("p",[t._v("https://www.baidu.com/sugrec?prod=pc&wd=zhi")])])}),[],!1,null,null,null);s.default=e.exports}}]);