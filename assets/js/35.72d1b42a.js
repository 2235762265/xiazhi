(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{459:function(t,s,a){"use strict";a.r(s);var n=a(2),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"http模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http模块"}},[t._v("#")]),t._v(" http模块")]),t._v(" "),s("h2",{attrs:{id:"_4-1-什么是-http-模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-什么是-http-模块"}},[t._v("#")]),t._v(" 4.1 什么是 http 模块")]),t._v(" "),s("p",[t._v("回顾：什么是客户端、什么是服务器？")]),t._v(" "),s("p",[t._v("在网络节点中，"),s("strong",[t._v("负责消费资源")]),t._v("的电脑，叫做**"),s("font",{attrs:{color:"red"}},[t._v("客户端")]),t._v("**；")],1),t._v(" "),s("p",[s("strong",[t._v("负责对外提供网络资源")]),t._v("的电脑，叫做**"),s("font",{attrs:{color:"red"}},[t._v("服务器")]),t._v("**。")],1),t._v(" "),s("p",[s("strong",[t._v("http 模块")]),t._v("是 Node.js 官方提供的、用来"),s("strong",[t._v("创建 web 服务器")]),t._v("的模块。通过 http 模块提供的 "),s("code",[t._v("http.createServer()")]),t._v(" 方法，就 能方便的把一台普通的电脑，变成一台 Web 服务器，从而对外提供 Web 资源服务。")]),t._v(" "),s("p",[t._v("如果要希望使用 http 模块创建 Web 服务器，则需要先导入它")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_4-2-进一步理解-http-模块的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-进一步理解-http-模块的作用"}},[t._v("#")]),t._v(" 4.2 进一步理解 http 模块的作用")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("服务器和普通电脑的"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("区别"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("在于，服务器上"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("安装了 web 服务器软件"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("，例如："),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IIS")]),t._v("、Apache 等。通过安装这些服务器软件， 就能把一台普通的电脑变成一台 web 服务器。\n\n在 Node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js 中，我们"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("不需要使用"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IIS")]),t._v("、Apache 等这些"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("第三方 web 服务器软件"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("。因为我们可以基于 Node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js 提供的 http 模块，"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("通过几行简单的代码，就能轻松的手写一个服务器软件"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("，从而对外提供 web 服务。\n")])])]),s("h2",{attrs:{id:"_4-3-服务器相关的概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-服务器相关的概念"}},[t._v("#")]),t._v(" 4.3 服务器相关的概念")]),t._v(" "),s("h3",{attrs:{id:"_1-ip-地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ip-地址"}},[t._v("#")]),t._v(" 1.IP 地址")]),t._v(" "),s("ul",[s("li",[t._v("IP 地址")])]),t._v(" "),s("p",[t._v("就是互联网上"),s("strong",[t._v("每台计算机的唯一地址")]),t._v("，因此 IP 地址具有唯一性。如果把“个人电脑”比作“一台电话”，那么“IP地 址”就相当于“电话号码”，只有在知道对方 IP 地址的前提下，才能与对应的电脑之间进行数据通信。")]),t._v(" "),s("ul",[s("li",[t._v("IP 地址的格式：通常用“")])]),t._v(" "),s("p",[s("strong",[t._v("点分十进制")]),t._v("”表示成（a.b.c.d）的形式，其中，a,b,c,d 都是 0~255 之间的十进制整数。例如：用 点分十进表示的 IP地址（192.168.1.1）")]),t._v(" "),s("p",[t._v("注意：")]),t._v(" "),s("p",[t._v("① 互联网中每台 Web 服务器，都有自己的 IP 地址，例如：大家可以在 Windows 的终端中运行 ping www.baidu.com 命 令，即可查看到百度服务器的 IP 地址。")]),t._v(" "),s("p",[t._v("② 在开发期间，自己的电脑既是一台服务器，也是一个客户端，为了方便测试，可以在自己的浏览器中输入 127.0.0.1 这个 IP 地址，就能把自己的电脑当做一台服务器进行访问了。")]),t._v(" "),s("h3",{attrs:{id:"_2-域名和域名服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-域名和域名服务器"}},[t._v("#")]),t._v(" 2.域名和域名服务器")]),t._v(" "),s("p",[t._v("尽管 IP 地址能够唯一地标记网络上的计算机，但IP地址是一长串数字，"),s("strong",[t._v("不直观")]),t._v("，而且"),s("strong",[t._v("不便于记忆")]),t._v("，于是人们又发明了另一套 字符型的地址方案，即所谓的"),s("strong",[t._v("域名（Domain Name）地址")]),t._v("。")]),t._v(" "),s("p",[s("strong",[t._v("IP地址")]),t._v("和"),s("strong",[t._v("域名是一一对应的关系")]),t._v("，这份对应关系存放在一种叫做"),s("strong",[t._v("域名服务器")]),t._v("(DNS，Domain name server)的电脑中。使用者 只需通过好记的域名访问对应的服务器即可，对应的转换工作由域名服务器实现。因此，"),s("strong",[t._v("域名服务器就是提供 IP 地址和域名 之间的转换服务的服务器。")])]),t._v(" "),s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("单纯使用 IP 地址，互联网中的电脑也能够正常工作。但是有了域名的加持，能让互联网的世界变得更加方便。")])]),t._v(" "),s("li",[s("p",[t._v("在开发测试期间， "),s("strong",[t._v("127.0.0.1")]),t._v(" 对应的域名是 "),s("strong",[t._v("localhost")]),t._v("，它们都代表我们自己的这台电脑，在使用效果上没有任何区别。")])])]),t._v(" "),s("h3",{attrs:{id:"_3-端口号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-端口号"}},[t._v("#")]),t._v(" 3.端口号")]),t._v(" "),s("p",[t._v("计算机中的端口号，就好像是现实生活中的门牌号一样。通过门牌号，外卖小哥可以在整栋大楼众多的房间中，准确把外卖 送到你的手中。")]),t._v(" "),s("p",[t._v("同样的道理，在一台电脑中，可以运行成百上千个 web 服务。每个 web 服务都对应一个唯一的端口号。客户端发送过来的 网络请求，通过端口号，可以被准确地交给"),s("strong",[t._v("对应的 web 服务")]),t._v("进行处理。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/nodeImgs/5.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_4-4-创建最基本的-web-服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-创建最基本的-web-服务器"}},[t._v("#")]),t._v(" 4.4 创建最基本的 web 服务器")]),t._v(" "),s("h3",{attrs:{id:"_1-创建-web-服务器的基本步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建-web-服务器的基本步骤"}},[t._v("#")]),t._v(" 1.创建 web 服务器的基本步骤")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("导入 http 模块")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ol",[s("li",[s("strong",[t._v("创建 web 服务器实例")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ol",[s("li",[s("strong",[t._v("为服务器实例绑定 request 事件，监听客户端的请求")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用服务器实例的 .on 方法，为服务器绑定一个request事件")]),t._v("\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//只要有客户端来请求我们自己的服务器就会触发request事件，从而调用这个事件处理函数")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'有人访问了我们的服务器'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ol",[s("li",[s("strong",[t._v("启动服务器")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//调用 server.listen(端口号，cb回调) 方法,即可启动web服务器")]),t._v("\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http server running at http://127.0.0.1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_2-req-请求对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-req-请求对象"}},[t._v("#")]),t._v(" 2.req 请求对象")]),t._v(" "),s("p",[t._v("只要服务器接收到了客户端的请求，就会调用通过 "),s("strong",[s("code",[t._v("server.on()")])]),t._v(" 为服务器绑定的 "),s("strong",[t._v("request 事件处理函数")]),t._v("。 如果想在事件处理函数中，访问与客户端相关的数据或属性，可以使用如下的方式")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("req")]),t._v("是请求对象，它包含了与客户端相关的数据和属性，例如:")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("req.url")]),t._v("是客户端请求的URL地址，默认为**"),s("code",[t._v("/")]),t._v("**")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("req.method")]),t._v("是客户端的"),s("strong",[t._v("method")]),t._v(" 请求类型，"),s("strong",[t._v("get")]),t._v("或"),s("strong",[t._v("post")])])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Your request url is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("，and request method is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_3-res-响应对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-res-响应对象"}},[t._v("#")]),t._v(" 3.res 响应对象")]),t._v(" "),s("p",[s("strong",[t._v("作用")]),t._v("：向客户端发送指定的内容，并结束这次请求的处理过程")]),t._v(" "),s("p",[t._v("在服务器的 request 事件处理函数中，如果想访问与服务器相关的"),s("strong",[t._v("数据")]),t._v("或"),s("strong",[t._v("属性")])]),t._v(" "),s("p",[t._v("可以使用res.end()方法"),s("strong",[t._v("向客户端发送指定的内容")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//res是响应对象，它包含了与服务器相关的数据和属性，例如:")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//要发送到客户端的字符串")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Your request url is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("，and request method is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_4-解决中文乱码问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-解决中文乱码问题"}},[t._v("#")]),t._v(" 4.解决中文乱码问题")]),t._v(" "),s("p",[t._v("当调用 res.end() 方法，向客户端发送中文内容的时候，会出现乱码问题，此时，需要手"),s("strong",[t._v("动设置内容的编码格式")]),t._v("：")]),t._v(" "),s("p",[s("strong",[t._v("设置响应头Content-Type")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发送的内容包含中文")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" str"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("您的url请求地址是")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(",请求类型method为")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//为了防止中文显示乱码的问题，需要设置响应头Content-Type 的值为 text/html;charset=utf-8")]),t._v("\n\tres"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html;charset=utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//把包含中文的内容，响应给客户端")]),t._v("\n\tres"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_4-5-根据不同的-url-响应不同的-html内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-根据不同的-url-响应不同的-html内容"}},[t._v("#")]),t._v(" 4.5 根据不同的 url 响应不同的 html内容")]),t._v(" "),s("h3",{attrs:{id:"_1-核心实现步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-核心实现步骤"}},[t._v("#")]),t._v(" 1.核心实现步骤")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("获取"),s("strong",[t._v("请求的 url 地址")])])]),t._v(" "),s("li",[s("p",[t._v("设置"),s("strong",[t._v("默认的响应内容")]),t._v("为 404 Not found")])]),t._v(" "),s("li",[s("p",[t._v("判断用户请求的是否为 "),s("code",[t._v("/")]),t._v(" 或 "),s("code",[t._v("/index.html")]),t._v(" 首页")])]),t._v(" "),s("li",[s("p",[t._v("判断用户请求的是否为 "),s("code",[t._v("/about.html")]),t._v(" 关于页面")])]),t._v(" "),s("li",[s("p",[t._v("设置 "),s("strong",[t._v("Content-Type 响应头")]),t._v("，防止中文乱码")])]),t._v(" "),s("li",[s("p",[t._v("使用 "),s("strong",[t._v("res.end()")]),t._v(" 把内容响应给客户端")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'request'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取请求的 url 地址")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>404 Not fond!</h1>'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置默认的响应内容为 404 Not found")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/index.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>首页</h1>'")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用户请求的是首页")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/about.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>关于页面</h1>'")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用户请求的是关于页面")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html;charset=utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置 Content-Type 响应头，防止中文乱码 ")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//把内容响应给客户端")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);