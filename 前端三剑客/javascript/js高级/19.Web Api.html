<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web Api | Fade away</title>
    <meta name="generator" content="VuePress 1.9.9">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/animejs@3.0.1/lib/anime.min.js"></script>
    <script type="text/javascript" src="/js/mouseClick.js"></script>
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <meta name="description" content="花有重开日，人无在少年">
    <meta name="keywords" content="随便写写">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="robots" content="all">
    <meta name="author" content="xiazhi">
    
    <link rel="preload" href="/assets/css/0.styles.91dd29b7.css" as="style"><link rel="preload" href="/assets/js/app.99624b8a.js" as="script"><link rel="preload" href="/assets/js/3.a9f58784.js" as="script"><link rel="preload" href="/assets/js/1.a344c94a.js" as="script"><link rel="preload" href="/assets/js/104.47329018.js" as="script"><link rel="preload" href="/assets/js/30.7d28a2d6.js" as="script"><link rel="prefetch" href="/assets/js/10.513c5d67.js"><link rel="prefetch" href="/assets/js/100.331ca440.js"><link rel="prefetch" href="/assets/js/101.f600eae1.js"><link rel="prefetch" href="/assets/js/102.701a3771.js"><link rel="prefetch" href="/assets/js/103.1a52eead.js"><link rel="prefetch" href="/assets/js/105.57317b7d.js"><link rel="prefetch" href="/assets/js/106.7c24c08f.js"><link rel="prefetch" href="/assets/js/107.9fdd48da.js"><link rel="prefetch" href="/assets/js/108.73ecc853.js"><link rel="prefetch" href="/assets/js/109.7abf6317.js"><link rel="prefetch" href="/assets/js/11.5ef240f5.js"><link rel="prefetch" href="/assets/js/110.7027a417.js"><link rel="prefetch" href="/assets/js/111.ebaca92a.js"><link rel="prefetch" href="/assets/js/112.f1b3db2d.js"><link rel="prefetch" href="/assets/js/113.1ddfd958.js"><link rel="prefetch" href="/assets/js/114.48e05a14.js"><link rel="prefetch" href="/assets/js/115.5b1f83cc.js"><link rel="prefetch" href="/assets/js/116.5f0c8321.js"><link rel="prefetch" href="/assets/js/117.1a418555.js"><link rel="prefetch" href="/assets/js/118.ff87b9d2.js"><link rel="prefetch" href="/assets/js/119.037a1943.js"><link rel="prefetch" href="/assets/js/12.4a7003f3.js"><link rel="prefetch" href="/assets/js/120.cee1015b.js"><link rel="prefetch" href="/assets/js/121.52ac3e89.js"><link rel="prefetch" href="/assets/js/122.a3560045.js"><link rel="prefetch" href="/assets/js/123.721257bf.js"><link rel="prefetch" href="/assets/js/124.e2045af2.js"><link rel="prefetch" href="/assets/js/125.495ee0cb.js"><link rel="prefetch" href="/assets/js/126.fac66553.js"><link rel="prefetch" href="/assets/js/127.f59af0ba.js"><link rel="prefetch" href="/assets/js/128.f40cdaa1.js"><link rel="prefetch" href="/assets/js/129.67b3d27d.js"><link rel="prefetch" href="/assets/js/13.d4371f04.js"><link rel="prefetch" href="/assets/js/130.aa06024b.js"><link rel="prefetch" href="/assets/js/131.dee3e4e5.js"><link rel="prefetch" href="/assets/js/132.d6776d37.js"><link rel="prefetch" href="/assets/js/133.48b0028d.js"><link rel="prefetch" href="/assets/js/134.615b85e9.js"><link rel="prefetch" href="/assets/js/135.1ecf85e0.js"><link rel="prefetch" href="/assets/js/136.6fe1b198.js"><link rel="prefetch" href="/assets/js/137.5b56922f.js"><link rel="prefetch" href="/assets/js/138.4ad4e9d9.js"><link rel="prefetch" href="/assets/js/139.9a979a18.js"><link rel="prefetch" href="/assets/js/14.e51087d8.js"><link rel="prefetch" href="/assets/js/140.70982156.js"><link rel="prefetch" href="/assets/js/141.6006a4c5.js"><link rel="prefetch" href="/assets/js/142.09d04a53.js"><link rel="prefetch" href="/assets/js/143.00574315.js"><link rel="prefetch" href="/assets/js/144.56c8a90a.js"><link rel="prefetch" href="/assets/js/145.17e7e39c.js"><link rel="prefetch" href="/assets/js/146.55527375.js"><link rel="prefetch" href="/assets/js/147.ba67a557.js"><link rel="prefetch" href="/assets/js/15.f139a61b.js"><link rel="prefetch" href="/assets/js/16.98e04b9a.js"><link rel="prefetch" href="/assets/js/17.28b86c6e.js"><link rel="prefetch" href="/assets/js/18.0855c83f.js"><link rel="prefetch" href="/assets/js/19.1ddb5980.js"><link rel="prefetch" href="/assets/js/20.e0af366f.js"><link rel="prefetch" href="/assets/js/21.a6d28092.js"><link rel="prefetch" href="/assets/js/22.41b481ae.js"><link rel="prefetch" href="/assets/js/23.5ded2918.js"><link rel="prefetch" href="/assets/js/24.9f77e0f8.js"><link rel="prefetch" href="/assets/js/25.15cc72ab.js"><link rel="prefetch" href="/assets/js/26.fe75f118.js"><link rel="prefetch" href="/assets/js/27.2e89380e.js"><link rel="prefetch" href="/assets/js/28.f9766ddb.js"><link rel="prefetch" href="/assets/js/29.df3bae1e.js"><link rel="prefetch" href="/assets/js/31.773fff91.js"><link rel="prefetch" href="/assets/js/32.a519b5bb.js"><link rel="prefetch" href="/assets/js/33.c54ccdbf.js"><link rel="prefetch" href="/assets/js/34.bcc19a82.js"><link rel="prefetch" href="/assets/js/35.72d1b42a.js"><link rel="prefetch" href="/assets/js/36.ac818ff6.js"><link rel="prefetch" href="/assets/js/37.4c919707.js"><link rel="prefetch" href="/assets/js/38.e2cb4341.js"><link rel="prefetch" href="/assets/js/39.ad223721.js"><link rel="prefetch" href="/assets/js/4.03f95861.js"><link rel="prefetch" href="/assets/js/40.ded09630.js"><link rel="prefetch" href="/assets/js/41.61954733.js"><link rel="prefetch" href="/assets/js/42.19fab9ef.js"><link rel="prefetch" href="/assets/js/43.8c4fd22e.js"><link rel="prefetch" href="/assets/js/44.6b6add1a.js"><link rel="prefetch" href="/assets/js/45.5adaa0dd.js"><link rel="prefetch" href="/assets/js/46.274bbf17.js"><link rel="prefetch" href="/assets/js/47.b0ce2c47.js"><link rel="prefetch" href="/assets/js/48.69800b3e.js"><link rel="prefetch" href="/assets/js/49.c567847f.js"><link rel="prefetch" href="/assets/js/5.76fa7a68.js"><link rel="prefetch" href="/assets/js/50.6abd0bf4.js"><link rel="prefetch" href="/assets/js/51.1d7ed678.js"><link rel="prefetch" href="/assets/js/52.b0664139.js"><link rel="prefetch" href="/assets/js/53.4cb0e403.js"><link rel="prefetch" href="/assets/js/54.6c84bf77.js"><link rel="prefetch" href="/assets/js/55.9d68b9fb.js"><link rel="prefetch" href="/assets/js/56.520092f0.js"><link rel="prefetch" href="/assets/js/57.9dc9d2d0.js"><link rel="prefetch" href="/assets/js/58.5fa2435a.js"><link rel="prefetch" href="/assets/js/59.7f3705fd.js"><link rel="prefetch" href="/assets/js/6.54231d4c.js"><link rel="prefetch" href="/assets/js/60.9c9bd024.js"><link rel="prefetch" href="/assets/js/61.6eb0c0bb.js"><link rel="prefetch" href="/assets/js/62.149eb308.js"><link rel="prefetch" href="/assets/js/63.be303c2d.js"><link rel="prefetch" href="/assets/js/64.27592e06.js"><link rel="prefetch" href="/assets/js/65.e8f30ad3.js"><link rel="prefetch" href="/assets/js/66.67a34028.js"><link rel="prefetch" href="/assets/js/67.c395f7ed.js"><link rel="prefetch" href="/assets/js/68.d9142a8a.js"><link rel="prefetch" href="/assets/js/69.4f7f28f1.js"><link rel="prefetch" href="/assets/js/7.db62a644.js"><link rel="prefetch" href="/assets/js/70.20b76f9a.js"><link rel="prefetch" href="/assets/js/71.7ad2ee77.js"><link rel="prefetch" href="/assets/js/72.36864641.js"><link rel="prefetch" href="/assets/js/73.9c9e473d.js"><link rel="prefetch" href="/assets/js/74.469ada63.js"><link rel="prefetch" href="/assets/js/75.503f5154.js"><link rel="prefetch" href="/assets/js/76.d34c55f7.js"><link rel="prefetch" href="/assets/js/77.cdd50449.js"><link rel="prefetch" href="/assets/js/78.324b5df5.js"><link rel="prefetch" href="/assets/js/79.31e8cb64.js"><link rel="prefetch" href="/assets/js/8.7b245108.js"><link rel="prefetch" href="/assets/js/80.31dca687.js"><link rel="prefetch" href="/assets/js/81.3dd21cf7.js"><link rel="prefetch" href="/assets/js/82.eeeee6cf.js"><link rel="prefetch" href="/assets/js/83.5d03d2d9.js"><link rel="prefetch" href="/assets/js/84.7e956720.js"><link rel="prefetch" href="/assets/js/85.a3b6227a.js"><link rel="prefetch" href="/assets/js/86.b2f71436.js"><link rel="prefetch" href="/assets/js/87.f9f3b65a.js"><link rel="prefetch" href="/assets/js/88.4c9d4599.js"><link rel="prefetch" href="/assets/js/89.cca52254.js"><link rel="prefetch" href="/assets/js/9.63b5e451.js"><link rel="prefetch" href="/assets/js/90.dad44872.js"><link rel="prefetch" href="/assets/js/91.3995bce6.js"><link rel="prefetch" href="/assets/js/92.f311f03c.js"><link rel="prefetch" href="/assets/js/93.911f57cc.js"><link rel="prefetch" href="/assets/js/94.3392f97b.js"><link rel="prefetch" href="/assets/js/95.1787563a.js"><link rel="prefetch" href="/assets/js/96.2a256f43.js"><link rel="prefetch" href="/assets/js/97.cdcd9405.js"><link rel="prefetch" href="/assets/js/98.4eae5b0f.js"><link rel="prefetch" href="/assets/js/99.0b6820bb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.91dd29b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-1c4f0192 data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-1c4f0192><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>Fade away</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>夏至</span>
            
          <span data-v-6cbeab0a>2022 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Fade away</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端三剑客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Html</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端三剑客/Html/01.Html初识.html" class="nav-link"><i class="iconfont undefined"></i>
  Html
</a></li></ul></li><li class="dropdown-item"><h4>CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端三剑客/CSS/CSS/01.引入css样式表.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-subitem"><a href="/前端三剑客/CSS/CSS3/01.新增选择器.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS3
</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端三剑客/javascript/js基础/01.js基础语法.html" class="nav-link"><i class="iconfont undefined"></i>
  Js基础
</a></li><li class="dropdown-subitem"><a href="/前端三剑客/javascript/js高级/01.this关键字.html" class="nav-link"><i class="iconfont undefined"></i>
  Js高级
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Vue/Vue2/01.Vue基础.html" class="nav-link"><i class="iconfont undefined"></i>
  Vue2
</a></li><li class="dropdown-subitem"><a href="/框架/Vue/Vue3/1.创建Vue3项目.html" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/React/01.React入门.html" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li></ul></li><li class="dropdown-item"><h4>小程序</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/小程序/01.mina.html" class="nav-link"><i class="iconfont undefined"></i>
  mina
</a></li><li class="dropdown-subitem"><a href="/框架/小程序/02.uni-app.html" class="nav-link"><i class="iconfont undefined"></i>
  uni-app
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/Node.js/01.初识Node.js.html" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></div><div class="nav-item"><a href="/学习git/git学习.html" class="nav-link"><i class="iconfont undefined"></i>
  学习git
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      可视化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/可视化/Canvas/01.认识Canvas.html" class="nav-link"><i class="iconfont undefined"></i>
  Canvas
</a></li><li class="dropdown-item"><!----> <a href="/可视化/Three.js/01.认识Three.js.html" class="nav-link"><i class="iconfont undefined"></i>
  Three.js
</a></li></ul></div></div><div class="nav-item"><a href="/收藏的网站/收藏的网站.html" class="nav-link"><i class="iconfont undefined"></i>
  收藏网址
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><!----> <h3 class="name" data-v-6c8ffc9c>
    夏至
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>0</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>0</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      前端三剑客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Html</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端三剑客/Html/01.Html初识.html" class="nav-link"><i class="iconfont undefined"></i>
  Html
</a></li></ul></li><li class="dropdown-item"><h4>CSS</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端三剑客/CSS/CSS/01.引入css样式表.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-subitem"><a href="/前端三剑客/CSS/CSS3/01.新增选择器.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS3
</a></li></ul></li><li class="dropdown-item"><h4>JavaScript</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/前端三剑客/javascript/js基础/01.js基础语法.html" class="nav-link"><i class="iconfont undefined"></i>
  Js基础
</a></li><li class="dropdown-subitem"><a href="/前端三剑客/javascript/js高级/01.this关键字.html" class="nav-link"><i class="iconfont undefined"></i>
  Js高级
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/Vue/Vue2/01.Vue基础.html" class="nav-link"><i class="iconfont undefined"></i>
  Vue2
</a></li><li class="dropdown-subitem"><a href="/框架/Vue/Vue3/1.创建Vue3项目.html" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li></ul></li><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/React/01.React入门.html" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li></ul></li><li class="dropdown-item"><h4>小程序</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/框架/小程序/01.mina.html" class="nav-link"><i class="iconfont undefined"></i>
  mina
</a></li><li class="dropdown-subitem"><a href="/框架/小程序/02.uni-app.html" class="nav-link"><i class="iconfont undefined"></i>
  uni-app
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/Node.js/01.初识Node.js.html" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></div><div class="nav-item"><a href="/学习git/git学习.html" class="nav-link"><i class="iconfont undefined"></i>
  学习git
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      可视化
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/可视化/Canvas/01.认识Canvas.html" class="nav-link"><i class="iconfont undefined"></i>
  Canvas
</a></li><li class="dropdown-item"><!----> <a href="/可视化/Three.js/01.认识Three.js.html" class="nav-link"><i class="iconfont undefined"></i>
  Three.js
</a></li></ul></div></div><div class="nav-item"><a href="/收藏的网站/收藏的网站.html" class="nav-link"><i class="iconfont undefined"></i>
  收藏网址
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/前端三剑客/javascript/js高级/01.this关键字.html" class="sidebar-link">this关键字</a></li><li><a href="/前端三剑客/javascript/js高级/02.let和const.html" class="sidebar-link">let 和 const 与 var</a></li><li><a href="/前端三剑客/javascript/js高级/03.解构赋值.html" class="sidebar-link">解构赋值</a></li><li><a href="/前端三剑客/javascript/js高级/04.箭头函数.html" class="sidebar-link">箭头函数</a></li><li><a href="/前端三剑客/javascript/js高级/05.模板字符串，展开运算符.html" class="sidebar-link">模版字符串与展开运算符</a></li><li><a href="/前端三剑客/javascript/js高级/06.ES6新增数据类型.html" class="sidebar-link">ES6新增数据类型</a></li><li><a href="/前端三剑客/javascript/js高级/07.面向对象.html" class="sidebar-link">面向对象</a></li><li><a href="/前端三剑客/javascript/js高级/08.正则.html" class="sidebar-link">正则表达式</a></li><li><a href="/前端三剑客/javascript/js高级/09.JSON.html" class="sidebar-link">JSON</a></li><li><a href="/前端三剑客/javascript/js高级/10.通信协议、Cookie及本地存储.html" class="sidebar-link">通信协议、Cookie及本地存储</a></li><li><a href="/前端三剑客/javascript/js高级/11.AJAX.html" class="sidebar-link">AJAX</a></li><li><a href="/前端三剑客/javascript/js高级/12.回调函数.html" class="sidebar-link">回调函数</a></li><li><a href="/前端三剑客/javascript/js高级/13.Promise.html" class="sidebar-link">Promise</a></li><li><a href="/前端三剑客/javascript/js高级/14.jQuery.html" class="sidebar-link">jQuery</a></li><li><a href="/前端三剑客/javascript/js高级/15.css预编译.html" class="sidebar-link">CSS预编译</a></li><li><a href="/前端三剑客/javascript/js高级/16.闭包和继承.html" class="sidebar-link">闭包和继承</a></li><li><a href="/前端三剑客/javascript/js高级/17.深浅拷贝、节流防抖.html" class="sidebar-link">深浅拷贝、节流防抖</a></li><li><a href="/前端三剑客/javascript/js高级/18.Es6模块化.html" class="sidebar-link">Es6模块化</a></li><li><a href="/前端三剑客/javascript/js高级/19.Web Api.html" class="active sidebar-link">Web Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#一、intersection-observer-api" class="sidebar-link">一、Intersection Observer Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_1-intersectionobserver" class="sidebar-link">1.IntersectionObserver</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_2-intersectionobserverentry" class="sidebar-link">2.IntersectionObserverEntry</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_3-实现图片懒加载" class="sidebar-link">3.实现图片懒加载</a></li></ul></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#二、page-visibility-api" class="sidebar-link">二、Page Visibility Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_1-属性" class="sidebar-link">1.属性</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_2-事件" class="sidebar-link">2.事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#三、animation-api" class="sidebar-link">三、Animation Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_3-1-animate" class="sidebar-link">3.1 animate()</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_3-2-动画实例方法" class="sidebar-link">3.2 动画实例方法</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_3-3-事件监听" class="sidebar-link">3.3 事件监听</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_3-4-keyframeeffect和animation" class="sidebar-link">3.4 KeyframeEffect和Animation</a></li></ul></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#四、clipboard-api" class="sidebar-link">四、Clipboard Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_4-1-实例方法" class="sidebar-link">4.1 实例方法</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_4-2-剪切板事件" class="sidebar-link">4.2 剪切板事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#五、网络状态监控" class="sidebar-link">五、网络状态监控</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_6-1-获取网络信息" class="sidebar-link">6.1 获取网络信息</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_6-2-监控网络状态" class="sidebar-link">6.2 监控网络状态</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_6-3-监控网络信息" class="sidebar-link">6.3 监控网络信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#六、拖拽api" class="sidebar-link">六、拖拽Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_6-1-设置元素可拖动" class="sidebar-link">6.1 设置元素可拖动</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_6-2-拖动事件" class="sidebar-link">6.2 拖动事件</a></li></ul></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#七、broadcastchannel" class="sidebar-link">七、BroadcastChannel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_7-1-实例化对象" class="sidebar-link">7.1 实例化对象</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_7-2-发送数据" class="sidebar-link">7.2 发送数据</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_7-3-关闭连接" class="sidebar-link">7.3 关闭连接</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_7-4-监听广播" class="sidebar-link">7.4 监听广播</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_7-5-监听错误" class="sidebar-link">7.5 监听错误</a></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#_7-6-封装广播工具" class="sidebar-link">7.6 封装广播工具</a></li></ul></li><li class="sidebar-sub-header"><a href="/前端三剑客/javascript/js高级/19.Web Api.html#八、声音的分析和处理" class="sidebar-link">八、声音的分析和处理</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>夏至</span>
            
          <span data-v-6cbeab0a>2022 - </span>
          2023
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>Web Api</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>夏至</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="web-api"><a href="#web-api" class="header-anchor">#</a> Web Api</h1> <h2 id="一、intersection-observer-api"><a href="#一、intersection-observer-api" class="header-anchor">#</a> 一、Intersection Observer Api</h2> <h3 id="_1-intersectionobserver"><a href="#_1-intersectionobserver" class="header-anchor">#</a> 1.IntersectionObserver</h3> <p><code>IntersectionObserver</code> 接口（从属于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener noreferrer">Intersection Observer API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</p> <p>提供了一种异步观察<strong>目标元素与其祖先元素或顶级文档交叉状态的方法</strong>。其祖先元素或视口被称为根（root）。</p> <p>此Api可用于以下场景</p> <ul><li>图片懒加载——当图片滚动到可见时才进行加载</li> <li>内容无限滚动——也就是用户滚动到接近内容底部时直接加载更多，而无需用户操作翻页，给用户一种网页可以无限滚动的错觉</li> <li>检测广告的曝光情况——为了计算广告收益，需要知道广告元素的曝光情况</li> <li>在用户看见某个区域时执行任务或播放动画</li></ul> <h4 id="_1-1-基本语法"><a href="#_1-1-基本语法" class="header-anchor">#</a> 1.1 基本语法</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">entries<span class="token punctuation">,</span>observer</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 回调函数逻辑</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token comment">// 配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_1-2-参数"><a href="#_1-2-参数" class="header-anchor">#</a> 1.2 参数</h4> <p><strong>callback</strong>：当元素可见比例超过指定阈值后，会调用一个回调函数，此回调函数接受两个参数：</p> <ul><li><strong>entries</strong>：一个<code>IntersectionObserverEntry</code>对象的数组，每个被触发的阈值，都或多或少与指定阈值有偏差。具体属性值查看下面IntersectionObserverEntry实例属性</li> <li><strong>observer</strong>：被调用的<code>IntersectionObserver</code>实例。</li></ul> <p><strong>options</strong>：可选，一个可以用来配置 observer 实例的对象。如果<code>options</code>未指定，observer 实例默认使用文档视口作为 root，并且没有 margin，阈值为 0%（意味着即使一像素的改变都会触发回调函数）。你可以指定以下配置：</p> <ul><li><p><strong>root</strong>：<strong>监听元素的祖先dom元素</strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element" target="_blank" rel="noopener noreferrer"><code>Element</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对象，其边界盒将被视作视口。目标在根的可见区域的的任何不可见部分都会被视为不可见。</p></li> <li><p><strong>rootMargin</strong>：<strong>可以扩大或缩小目标元素与根元素重叠面积的判定范围</strong></p> <ul><li>语法大致和 CSS 中的<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/margin" target="_blank" rel="noopener noreferrer"><code>margin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 属性等同; 可以参考 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API#the_intersection_root_and_root_margin" target="_blank" rel="noopener noreferrer">intersection root 和 root margin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来深入了解 margin 的工作原理及其语法。</li> <li>默认值是&quot;0px 0px 0px 0px&quot;。</li> <li>例如，当threshold=0，给目标元素添加了100px的rootMargin，则原本目标元素与根元素有1px的重合就会触发回调函数，现在目标元素与根元素相聚100px时就会触发回调</li></ul></li> <li><p><strong>threshold</strong>：规定了<strong>一个监听目标元素与根元素交叉区域的比例值</strong></p> <ul><li>可以是一个具体的数值或是一组 0.0 到 1.0 之间的数值。</li> <li>若指定值为 0.0，则意味着监听元素即使与根有 1 像素交叉，此元素也会被视为可见。</li> <li>若指定值为 1.0，则意味着整个元素都在可见范围内时才算可见。</li> <li>可以参考<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API#thresholds" target="_blank" rel="noopener noreferrer">阈值<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来深入了解阈值是如何使用的。阈值的默认值为 0.0。</li></ul></li></ul> <h4 id="_1-3-实例属性"><a href="#_1-3-实例属性" class="header-anchor">#</a> 1.3 实例属性</h4> <h5 id="_1-3-1-root"><a href="#_1-3-1-root" class="header-anchor">#</a> 1.3.1 root</h5> <p><code>root</code> 属性用来获取当前 <code>intersectionObserver</code> 实例的根元素。</p> <h5 id="_1-3-2-rootmargin"><a href="#_1-3-2-rootmargin" class="header-anchor">#</a> 1.3.2 rootMargin</h5> <p>只读属性 <strong><code>rootMargin</code></strong> 是与 CSS 属性<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/margin" target="_blank" rel="noopener noreferrer"><code>margin</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>语法相似的字符串 (string) 对象。在交叉检测开始之前，由<code>rootMargin 规定的矩形的每一边都会被添加至</code><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver/root" target="_blank" rel="noopener noreferrer"><code>root</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>元素的边框盒 (<a href="https://developer.mozilla.org/en-US/docs/Glossary/Bounding_box" target="_blank" rel="noopener noreferrer">bounding box (en-US)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) 的相应边。例如，这可以让你向外调整边界，使得目标元素被认为是 100% 可见的，即使此元素得一部分长或宽被裁剪，或者在边缘过于靠近根边框盒边界的情况下，将目标视为部分隐藏。</p> <p>设置方法和css设置margin一致</p> <h5 id="_1-3-3-thresholds"><a href="#_1-3-3-thresholds" class="header-anchor">#</a> 1.3.3 thresholds</h5> <p>只读阈值属性返回在使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver/IntersectionObserver" target="_blank" rel="noopener noreferrer"><code>IntersectionObserver（）</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 实例化观察器时指定的交集**<code>阈值</code>**列表。如果在实例化对象时仅提供一个阈值比率，这将是一个包含该单个值的数组。</p> <h4 id="_1-4-实例方法"><a href="#_1-4-实例方法" class="header-anchor">#</a> 1.4 实例方法</h4> <h5 id="_1-4-1-disconnect"><a href="#_1-4-1-disconnect" class="header-anchor">#</a> 1.4.1 disconnect()</h5> <p><strong>作用</strong>：终止对所有目标元素可见性变化的观察。</p> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ob<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_1-4-2-observe"><a href="#_1-4-2-observe" class="header-anchor">#</a> 1.4.2 observe()</h5> <p><strong>作用</strong>：向 IntersectionObserver 对象监听的目标集合添加一个dom元素。</p> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
ob<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;elementToObserve&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_1-4-3-unobserve"><a href="#_1-4-3-unobserve" class="header-anchor">#</a> 1.4.3  unobserve()</h5> <p>命令<code>IntersectionObserver</code><strong>停止对一个元素的观察</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
ob<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;elementToObserve&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* ... */</span>

ob<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;elementToObserve&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-intersectionobserverentry"><a href="#_2-intersectionobserverentry" class="header-anchor">#</a> 2.IntersectionObserverEntry</h3> <p><code>IntersectionObserverEntry 接口</code> (从属于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener noreferrer">Intersection Observer API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ) <strong>描述了目标元素与其根元素容器在某一特定过渡时刻的交叉状态。</strong></p> <p><code>IntersectionObserverEntry</code> 的实例作为 <code>entries</code> 参数被传递到一个 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver" target="_blank" rel="noopener noreferrer"><code>IntersectionObserver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的回调函数中; 此外，这些对象只能通过调用<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver/takeRecords" target="_blank" rel="noopener noreferrer"><code>IntersectionObserver.takeRecords()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来获取。</p> <h4 id="_2-1-实例属性"><a href="#_2-1-实例属性" class="header-anchor">#</a> 2.1 实例属性</h4> <h5 id="_2-1-1-boundingcientrect"><a href="#_2-1-1-boundingcientrect" class="header-anchor">#</a> 2.1.1 boundingCientRect</h5> <p>只读属性，返回一个<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMRect" target="_blank" rel="noopener noreferrer">DOMRect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对象，该属性实质上描述了一个描述 包含整个目标元素的最小矩形。</p> <p>包含此dom元素的left、right、top、bottom、width、height、x、y属性</p> <h5 id="_2-1-2-intersectionratio"><a href="#_2-1-2-intersectionratio" class="header-anchor">#</a> 2.1.2 intersectionRatio</h5> <p>返回观察元素与根元素面积面积相交的比率，值在<strong>0.0~1.0</strong>之间</p> <ul><li>若目标元素与根元素一点都不相交，则为0</li> <li>若目标元素与根元素完全相交，则为1</li></ul> <h5 id="_2-1-3-intersectionrect"><a href="#_2-1-3-intersectionrect" class="header-anchor">#</a> 2.1.3 intersectionRect</h5> <p><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry" target="_blank" rel="noopener noreferrer"><code>IntersectionObserverEntry</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 接口的 read-only <strong><code>intersectionRect</code></strong> 属性是一个 <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMRectReadOnly" target="_blank" rel="noopener noreferrer"><code>DOMRectReadOnly</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对象，它描述最小的矩形 包含当前在 中可见的目标元素的整个部分 交集根。</p> <h5 id="_2-1-4-isintersecting-重要"><a href="#_2-1-4-isintersecting-重要" class="header-anchor">#</a> 2.1.4 isIntersecting（重要）</h5> <p>只读属性，<strong>目标元素与根元素是否相交</strong>，返回<strong>布尔值</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">entries<span class="token punctuation">,</span> observe</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> entries<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'目标元素与根元素已相交'</span><span class="token punctuation">)</span>
                ob<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_2-1-5-target"><a href="#_2-1-5-target" class="header-anchor">#</a> 2.1.5 target</h5> <p>指定目标元素的dom元素，与document.querySelector获取的一样</p> <p>可通过target属性设置dom元素的样式、标签属性等</p> <h5 id="_2-1-6-time"><a href="#_2-1-6-time" class="header-anchor">#</a> 2.1.6 time</h5> <p>目标元素与根元素相交的时间，ms为单位</p> <h3 id="_3-实现图片懒加载"><a href="#_3-实现图片懒加载" class="header-anchor">#</a> 3.实现图片懒加载</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">entires</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> entry <span class="token keyword">of</span> entires<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>isIntersecting<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">const</span> img<span class="token operator">=</span>entry<span class="token punctuation">.</span>target
                img<span class="token punctuation">.</span>src<span class="token operator">=</span>img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src
                ob<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> imgs<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img[data-src]'</span><span class="token punctuation">)</span>
imgs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    ob<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="二、page-visibility-api"><a href="#二、page-visibility-api" class="header-anchor">#</a> 二、Page Visibility Api</h2> <p>页面可见性 API，<strong>可以监听当前页面是否可见</strong></p> <p>本Api分为两个属性：hidden、visibilityState；和一个事件：visibilitychange</p> <h3 id="_1-属性"><a href="#_1-属性" class="header-anchor">#</a> 1.属性</h3> <h4 id="_1-1-document-hidden"><a href="#_1-1-document-hidden" class="header-anchor">#</a> 1.1 document.hidden</h4> <p><strong><code>Document.hidden</code></strong> （只读属性）返回布尔值，表示页面是（true）否（false）隐藏。</p> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> document<span class="token punctuation">.</span>hidden
</code></pre></div><p>兼容性</p> <ul><li>IE浏览器中：mshidden，</li> <li>老版本谷歌中：webkithidden</li></ul> <h4 id="_1-2-document-visibilitystate"><a href="#_1-2-document-visibilitystate" class="header-anchor">#</a> 1.2 document.visibilityState</h4> <p><strong><code>Document.visibilityState</code></strong> （只读属性）, <strong>返回document的可见性</strong>，即当前可见元素的上下文环境。由此可以知道当前文档 (即为页面) 是在背后，或是不可见的隐藏的标签页，或者 (正在) 预渲染。可用的值如下：</p> <ul><li><strong>visible</strong> : 此时页面内容<strong>至少是部分可见</strong>。即此页面在前景标签页中，并且窗口没有最小化。</li> <li><strong>hidden</strong> : 此时页面对用户<strong>不可见</strong>。即文档处于背景标签页或者窗口处于最小化状态，或者操作系统正处于 '锁屏状态' .</li> <li><strong>prerender</strong> : 页面此时<strong>正在渲染中</strong>，因此是不可见的 (considered hidden for purposes of <code>document.hidden</code>). 文档只能从此状态开始，永远不能从其他值变为此状态。注意：浏览器支持是可选的。</li></ul> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> document<span class="token punctuation">.</span>visibilityState
</code></pre></div><p>当<code>visibilityState</code>改变时，会触发<code>visibilistchange</code>事件</p> <h3 id="_2-事件"><a href="#_2-事件" class="header-anchor">#</a> 2.事件</h3> <h4 id="_2-1-visibilistchange"><a href="#_2-1-visibilistchange" class="header-anchor">#</a> 2.1 visibilistchange</h4> <p>当其选项卡的内容变得可见或被隐藏时，会在文档上触发 <code>visibilitychange</code> (能见度更改) 事件。</p> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;visibilitychange&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> document<span class="token punctuation">.</span>visibilityState <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>兼容性</p> <ul><li>IE浏览器中：msvisibilitychange，</li> <li>老版本谷歌中：webkitvisibilitychange</li></ul> <h2 id="三、animation-api"><a href="#三、animation-api" class="header-anchor">#</a> 三、Animation Api</h2> <p>CSS实现动画时，在一些交互动画上并不灵活，可以使用js的一套Animation Api来完成动画的制作</p> <h3 id="_3-1-animate"><a href="#_3-1-animate" class="header-anchor">#</a> 3.1 animate()</h3> <h4 id="_3-1-1-语法"><a href="#_3-1-1-语法" class="header-anchor">#</a> 3.1.1 语法：</h4> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>keyframs<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><p><strong>返回一个animation动画实例</strong></p> <h4 id="_3-1-2-参数keyframs"><a href="#_3-1-2-参数keyframs" class="header-anchor">#</a> 3.1.2 参数keyframs</h4> <p><strong>作用</strong>：用来<strong>定义动画的关键帧</strong></p> <p>keyframes有两种形式，一种是数组形式，一种是对象形式。</p> <p>关键帧的偏移可以通过提供一个<code>offset</code>来指定</p> <ul><li>值必须是在 <strong>[0.0, 1.0]</strong> 这个区间内，且须升序排列</li> <li><strong>简单理解就是进度的百分比的小数值。</strong></li></ul> <p><strong>数组形式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">[</span> 
    <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0.7</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span> 
<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>对象形式</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">opacity</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.8</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// [ 0, 0.8, 1 ] 的简写</span>
    <span class="token literal-property property">easing</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'ease-in'</span><span class="token punctuation">,</span> <span class="token string">'ease-out'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以上写法与以下css写法一个意思</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@keyframes</span> bling</span> <span class="token punctuation">{</span>
    <span class="token selector">0%</span> <span class="token punctuation">{</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">70%</span> <span class="token punctuation">{</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 0.1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">100%</span> <span class="token punctuation">{</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-1-3-参数options"><a href="#_3-1-3-参数options" class="header-anchor">#</a> 3.1.3 参数options</h4> <p>作用：对象类型，用来定义动画过程中可以有哪些操作，相当于css中的animation属性</p> <p>其属性值与css各属性值相同<a href="https://xarzhi.gitee.io/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/CSS/CSS3/05.%E5%8A%A8%E7%94%BB.html#_3-1-animation-name" target="_blank" rel="noopener noreferrer">css动画常见属性<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>参数名</th> <th>含义</th></tr></thead> <tbody><tr><td><code>delay</code></td> <td>延迟动画开始的毫秒数。默认为0。</td></tr> <tr><td><code>direction</code></td> <td>动画运动方向</td></tr> <tr><td><code>duration</code></td> <td>动画每次迭代完成所需的毫秒数。默认为0</td></tr> <tr><td><code>easing</code></td> <td>动画曲线函数，可以自定义</td></tr> <tr><td><code>endDelay</code></td> <td>动画结束后要延迟的毫秒数。这主要用于基于另一个动画的结束时间对动画进行排序。默认为0。</td></tr> <tr><td><code>fill</code></td> <td>动画结束后属性值的状态</td></tr> <tr><td><code>iterationStart</code></td> <td>描述动画应该在迭代的什么时候开始。0.5表示在第一次迭代中途开始，使用这个值集，一个有两次迭代的动画将在第三次迭代中途结束。默认为0.0</td></tr> <tr><td><code>iterations</code></td> <td>动画应该重复的次数。默认值为1，也可以取一个值 Infinity，使其在元素存在期间重复。</td></tr> <tr><td><code>composite</code></td> <td>动画和其他单独的动画之间组合。 这是个高级特性，默认是replace，就是替换提起的动画。</td></tr> <tr><td><code>iterationComposite</code></td> <td>动画的属性值变化如何在每次动画迭代时累积或相互覆盖</td></tr></tbody></table> <p><strong>参照css属性</strong></p> <table><thead><tr><th>Web Animation API</th> <th>CSS</th></tr></thead> <tbody><tr><td>delay</td> <td>animation-delay</td></tr> <tr><td>duration</td> <td>animation-duration</td></tr> <tr><td>iterations</td> <td>animation-iteration-count</td></tr> <tr><td>direction</td> <td>animation-direction</td></tr> <tr><td>easing</td> <td>animation-timing-function</td></tr> <tr><td>fill</td> <td>animation-fill-mode</td></tr></tbody></table> <p><strong>注意参数设置值上的区别</strong></p> <ol><li><code>duration</code> 参数只支持毫秒</li> <li>迭代次数无限使用的是 JS的<code>Infinity</code>，不是字符串 <code>&quot;infinite&quot;</code></li> <li>默认动画的贝塞尔是<code>linear</code>，而不是css的<code>ease</code></li></ol> <h4 id="_3-1-4-getanimations"><a href="#_3-1-4-getanimations" class="header-anchor">#</a> 3.1.4 getAnimations()</h4> <p>我们通过Element.animate或者创建Animation给Element添加很多动画，通过这个方法可以<strong>获得所有Animation的实例</strong>。<strong>以数组形式存放</strong></p> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">getAnimations</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>通常用来当取消前面已经播放过的动画实例</p> <div class="language-js extra-class"><pre class="language-js"><code>element<span class="token punctuation">.</span><span class="token function">getAnimations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-2-动画实例方法"><a href="#_3-2-动画实例方法" class="header-anchor">#</a> 3.2 动画实例方法</h3> <table><thead><tr><th>实例方法</th> <th>描述</th></tr></thead> <tbody><tr><td>cancel()</td> <td>取消动画</td></tr> <tr><td>finish()</td> <td>完成动画</td></tr> <tr><td>pause()</td> <td>暂停动画</td></tr> <tr><td>paly()</td> <td>播放动画</td></tr> <tr><td>reverse()</td> <td>动画逆转播放</td></tr></tbody></table> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> animate<span class="token operator">=</span>ball<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>keyframs<span class="token punctuation">,</span>options<span class="token punctuation">)</span>

animate<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>
</code></pre></div><h3 id="_3-3-事件监听"><a href="#_3-3-事件监听" class="header-anchor">#</a> 3.3 事件监听</h3> <p>Animation事件监听有两种方式，dom监听和promise监听</p> <h4 id="_3-3-1-dom监听"><a href="#_3-3-1-dom监听" class="header-anchor">#</a> 3.3.1 dom监听</h4> <div class="language-js extra-class"><pre class="language-js"><code>animation<span class="token punctuation">.</span><span class="token function-variable function">onfinish</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  element<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

animation<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;finish&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  element<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-3-2-promise监听"><a href="#_3-3-2-promise监听" class="header-anchor">#</a> 3.3.2 promise监听</h4> <div class="language-js extra-class"><pre class="language-js"><code>animation<span class="token punctuation">.</span>finished<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  element<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>所有动画完成后</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> animates <span class="token operator">=</span>element<span class="token punctuation">.</span><span class="token function">getAnimations</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>animates<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">ani</span> <span class="token operator">=&gt;</span> ani<span class="token punctuation">.</span>finished<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>           
    	<span class="token comment">// do something cool </span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_3-3-3-常用事件回调"><a href="#_3-3-3-常用事件回调" class="header-anchor">#</a> 3.3.3 常用事件回调</h4> <table><thead><tr><th>监听事件</th> <th>描述</th></tr></thead> <tbody><tr><td>oncancel</td> <td>监听动画取消</td></tr> <tr><td>onfinish</td> <td>监听动画完成</td></tr> <tr><td>onremove</td> <td>监听动画删除</td></tr></tbody></table> <h3 id="_3-4-keyframeeffect和animation"><a href="#_3-4-keyframeeffect和animation" class="header-anchor">#</a> 3.4 KeyframeEffect和Animation</h3> <p>KeyframeEffect和Animation是web Animations API 两个核心的对象</p> <ol><li>KeyframeEffect 描述动画属性</li> <li>Animation 控制播放</li></ol> <h4 id="_3-4-1-keyframeeffect"><a href="#_3-4-1-keyframeeffect" class="header-anchor">#</a> 3.4.1 KeyframeEffect</h4> <p><strong>作用</strong>：用来定义动画的关键帧</p> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> keyframs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyframeEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> keyframes<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><p><strong>参数</strong>：</p> <ul><li>target：需要指定动画的dom元素</li> <li>keyframes、options与上方3.1.2、3.1.3一致</li></ul> <h4 id="_3-4-2-animation"><a href="#_3-4-2-animation" class="header-anchor">#</a> 3.4.2 Animation</h4> <p><strong>作用</strong>：KeyframeEffect返回一个animation动画实例，由Animation对象实例来控制动画</p> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> keyframs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KeyframeEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> keyframes<span class="token punctuation">,</span> options<span class="token punctuation">)</span>

<span class="token keyword">const</span> ani <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animation</span><span class="token punctuation">(</span>keyframs<span class="token punctuation">)</span><span class="token punctuation">;</span>

ani<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ani<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span>
</code></pre></div><p>Animation 实例对象的方法与上方3.2一致</p> <p>gsap：用空学https://gsap.framer.wiki/</p> <h2 id="四、clipboard-api"><a href="#四、clipboard-api" class="header-anchor">#</a> 四、Clipboard Api</h2> <p>剪贴板 Clipboard API 为 <strong>Navigator</strong> 接口添加了只读属性 <code>clipboard</code>，该属性返回一个<strong>可以读写剪切板内容</strong>的 <strong>Clipboard</strong> 对象。 在 Web 应用中，剪切板 API 可用于实现剪切、复制、粘贴的功能。</p> <h3 id="_4-1-实例方法"><a href="#_4-1-实例方法" class="header-anchor">#</a> 4.1 实例方法</h3> <p><code>Clipboard Api</code>的实例方法在<code>navigator.clipboard</code>对象上</p> <h4 id="_4-1-1-read"><a href="#_4-1-1-read" class="header-anchor">#</a> 4.1.1 read()</h4> <p><strong>作用</strong>：<strong>请求获取剪贴板内容</strong>，在解析承诺时将数据传递给返回的 <strong>Promise</strong>。</p> <ul><li>与 <code>readText()</code> 不同，该方法可以返回任意数据，例如图像。</li></ul> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> promise <span class="token operator">=</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_4-1-2-readtext"><a href="#_4-1-2-readtext" class="header-anchor">#</a> 4.1.2 readText()</h4> <p><strong>作用</strong>：解析系统剪贴板的文本内容返回一个Promise</p> <ul><li>当剪切板有东西时，浏览器会首先请求获取剪切板内容</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">readText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        box<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_4-1-3-write"><a href="#_4-1-3-write" class="header-anchor">#</a> 4.1.3 write()</h4> <p><strong>作用</strong>：写入<strong>图片等任意的数据</strong>到剪贴板。这个方法可以用于实现剪切和复制的功能。</p> <p><strong>返回值</strong>：当数据被写入到剪贴板的时候，<strong>Promise</strong> 的<code>resolve</code> 回调被执行。如果剪贴板不能完成剪贴操作，<strong>Promise</strong>的<code>reject</code> 回调被执行。</p> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> promise <span class="token operator">=</span> navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>dataTransfer<span class="token punctuation">)</span>
</code></pre></div><p><strong>示例</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">setClipboard</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataTransfer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    data<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* success */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* failure */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-1-4-writetext"><a href="#_4-1-4-writetext" class="header-anchor">#</a> 4.1.4 writeText()</h4> <p><strong>作用</strong>：可以写入特定<strong>字符串</strong>到操作系统的剪切板。</p> <p><strong>返回值</strong>：一个<code>Promise</code>，一旦剪贴板的内容被更新，它就会被解析。如果调用者没有写入剪贴板的权限，则拒绝写入剪切板（reject）</p> <p><strong>语法</strong>：</p> <div class="language-js extra-class"><pre class="language-js"><code>navigator<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">writeText</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'复制成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'复制失败'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-2-剪切板事件"><a href="#_4-2-剪切板事件" class="header-anchor">#</a> 4.2 剪切板事件</h3> <table><thead><tr><th style="text-align:left;">事件</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">oncopy</td> <td style="text-align:left;">该事件在用户拷贝元素内容时触发</td></tr> <tr><td style="text-align:left;">oncut</td> <td style="text-align:left;">该事件在用户剪切元素内容时触发</td></tr> <tr><td style="text-align:left;">onpaste</td> <td style="text-align:left;">该事件在用户粘贴元素内容时触发</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'copy'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户复制了内容'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'cut'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户剪切了内容'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'paste'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'用户粘贴了内容'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="五、网络状态监控"><a href="#五、网络状态监控" class="header-anchor">#</a> 五、网络状态监控</h2> <h3 id="_6-1-获取网络信息"><a href="#_6-1-获取网络信息" class="header-anchor">#</a> 6.1 获取网络信息</h3> <p>通过<code>navigator.connection</code>可获取当前浏览器的网络状态</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>connection<span class="token punctuation">)</span>
</code></pre></div><p>可以获取到以下信息</p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>downlink</td> <td>返回以 <strong>Mb/s</strong> 为单位的<strong>有效带宽</strong></td></tr> <tr><td>effectiveType</td> <td>当前网络类型，如2g,3g,4g</td></tr> <tr><td>onchange</td> <td>网络状态发生变化时，触发相应回调</td></tr> <tr><td>rtt</td> <td>返回了当前连接下评估的<strong>往返延迟</strong>，也就是ping</td></tr> <tr><td>saveData</td> <td>表示用户代理对减少数据使用的偏好</td></tr></tbody></table> <p>注意：effectiveType并不能真正获取网络类型，而是通过综合网速来判断</p> <h3 id="_6-2-监控网络状态"><a href="#_6-2-监控网络状态" class="header-anchor">#</a> 6.2 监控网络状态</h3> <p>通过监控window对象的online和offline事件，获取浏览器的网络状态</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'上线了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'掉线了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-3-监控网络信息"><a href="#_6-3-监控网络信息" class="header-anchor">#</a> 6.3 监控网络信息</h3> <p>通过<code>navigator.connection</code>对象上的<code>onchange</code>事件，监控网络信息的变化</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> connect <span class="token operator">=</span> navigator<span class="token punctuation">.</span>connection<span class="token punctuation">;</span>

connect<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'网络信息发生变化'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="六、拖拽api"><a href="#六、拖拽api" class="header-anchor">#</a> 六、拖拽Api</h2> <p>拖拽对象分为拖拽目标和释放目标</p> <ul><li><strong>拖拽目标</strong>：鼠标按下元素，想要拖拽该元素，即被拖拽的元素</li> <li><strong>释放目标</strong>：鼠标拖动拖拽目标，在目标位置松开，即释放目标</li></ul> <h3 id="_6-1-设置元素可拖动"><a href="#_6-1-设置元素可拖动" class="header-anchor">#</a> 6.1 设置元素可拖动</h3> <p>给元素添加<code>draggable=&quot;true&quot;</code>属性</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">draggable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_6-2-拖动事件"><a href="#_6-2-拖动事件" class="header-anchor">#</a> 6.2 拖动事件</h3> <p>在<strong>拖动目标</strong>上触发事件(源元素)</p> <ul><li>此时<code>e.target</code>是拖动目标元素</li></ul> <table><thead><tr><th>事件</th> <th>描述</th></tr></thead> <tbody><tr><td>ondragstart</td> <td>拖动目标<strong>开始拖动</strong>时触发</td></tr> <tr><td>ondrag</td> <td>拖动目标<strong>被拖动时</strong>触发</td></tr> <tr><td>ondragend</td> <td>拖动目标<strong>结束拖动</strong>时触发</td></tr></tbody></table> <p>在<strong>释放目标</strong>上触发的事件</p> <ul><li>此时<code>e.target</code>是释放目标元素</li></ul> <table><thead><tr><th>事件</th> <th>描述</th></tr></thead> <tbody><tr><td>ondragenter</td> <td><strong>拖拽目标进入释放目标</strong>时触发</td></tr> <tr><td>ondragover</td> <td><strong>拖拽目标在释放目标上移动</strong>时触发</td></tr> <tr><td>ondragleave</td> <td><strong>拖拽目标离开释放目标</strong>时触发</td></tr> <tr><td>ondrop</td> <td><strong>拖拽目在释放目标上松开鼠标</strong>时触发</td></tr></tbody></table> <h2 id="七、broadcastchannel"><a href="#七、broadcastchannel" class="header-anchor">#</a> 七、BroadcastChannel</h2> <p><strong>作用</strong>：跨标签页通信</p> <p>BroadcastChannel允许同源的不同浏览器窗口，Tab 页，frame 或者 iframe 下的不同文档之间相互通信。通过触发一个 <code>message</code> 事件，消息可以广播到所有监听了该频道的 <code>BroadcastChannel</code> 对象。</p> <h3 id="_7-1-实例化对象"><a href="#_7-1-实例化对象" class="header-anchor">#</a> 7.1 实例化对象</h3> <p>需要传入一个字符串作为标识符，相当于广播名，可通过实例对象的<code>name</code>属性获取</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastChannel</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>channel<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment">// demo</span>
</code></pre></div><h3 id="_7-2-发送数据"><a href="#_7-2-发送数据" class="header-anchor">#</a> 7.2 发送数据</h3> <p>通过实例对象的<code>postmessage</code>方法发送任意类型的数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastChannel</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

channel<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-3-关闭连接"><a href="#_7-3-关闭连接" class="header-anchor">#</a> 7.3 关闭连接</h3> <p>通过调用 <code>BroadcastChannel.close()</code> 方法，可以马上断开其与对应频道的关联，并让其被垃圾回收。这是必要的步骤，因为浏览器没有其他方式知道频道不再被需要。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastChannel</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-4-监听广播"><a href="#_7-4-监听广播" class="header-anchor">#</a> 7.4 监听广播</h3> <p>通过监听实例对象的message事件，可获取广播发送的数据</p> <p>通过事件对象<code>e.data</code>获取数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastChannel</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

channel<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-5-监听错误"><a href="#_7-5-监听错误" class="header-anchor">#</a> 7.5 监听错误</h3> <p>当频道收到一条无法反序列化的消息时会在 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/BroadcastChannel" target="_blank" rel="noopener noreferrer"><code>BroadcastChannel</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对象上触发 <code>messageerror</code> 事件。</p> <div class="language-js extra-class"><pre class="language-js"><code>channel<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'messageerror'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-6-封装广播工具"><a href="#_7-6-封装广播工具" class="header-anchor">#</a> 7.6 封装广播工具</h3> <blockquote><p>channel.js</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 实例化广播对象</span>
<span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastChannel</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送广播</span>
<span class="token comment">/**
 *
 * @param {string} type 描述信息的类型
 * @param {any} content 发送的数据
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">sendMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    channel<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">,</span>
        content<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//接收广播</span>
<span class="token comment">/**
 *
 * @param {function} callback 处理接收数据的回调
 * @returns 移除监听
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">listenMsg</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    channel<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        channel<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="八、声音的分析和处理"><a href="#八、声音的分析和处理" class="header-anchor">#</a> 八、声音的分析和处理</h2></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><!----><div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 Fade away
    </div> <div class="operation" style="left:380px;bottom:20px;display:none;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="left:250px;bottom:0px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:-1;" data-v-248d85d6></canvas></div><!----><div id="goTop" class="hide-cat" data-v-bf92849a></div></div></div>
    <script src="/assets/js/app.99624b8a.js" defer></script><script src="/assets/js/3.a9f58784.js" defer></script><script src="/assets/js/1.a344c94a.js" defer></script><script src="/assets/js/104.47329018.js" defer></script><script src="/assets/js/30.7d28a2d6.js" defer></script>
  </body>
</html>
